install.packages("ggplot2")
install.packages("rjson")
library(rjson)
library(rjson)
filenames <- list.files("/kyat", pattern="*.json", full.names=TRUE)
glimpse(filenames)
jsonData <- lapply(filenames, function(x) fromJSON(file=x))
str(jsonData)
head(jsonData, n=10)
filenames <- list.files("~/home/s/kyat", pattern="*.json", full.names=TRUE)
jsonData <- lapply(filenames, function(x) fromJSON(file=x))
head(jsonData, n=10)
jsonData
filenames
sample <- fromJSON("~/home/s/kyat/2018.01.02.json")
sample <- fromJSON("/home/s/kyat/2018.01.02.json")
sample <- fromJSON("home/s/kyat/2018.01.02.json")
library(rjson)
files <- list.files(path = "~/home/s/kyat", pattern = "*.json", full.names = TRUE)
tbl <- sapply(files, fromJSON) %>%
bind_rows(.id = "date")
files <- list.files(path = "~/home/s/kyat", pattern = "*.json", full.names = TRUE)
tbl <- sapply(files, fromJSON) %>%
bind_rows(.id = "date")
library(jsonlite)
setwd("~/Documents/TDI2019/data/")
library(jsonlite)
fileList <- list.files(pattern = "*.json")
for (i in 1:length(fileList)) {
# make a list of dataframes and an index of dates
data[i] <- data.frame(fromJSON(fileList[i]))
date[i] <- substr(fileList[i], 1, 10)
# remove useless info
data[i]$info <- NULL
data[i]$description <- NULL
data[i]$timestamp <- NULL
}
date <- list()
data <- c()
date <- c()
fileList <- list.files(pattern = "*.json")
for (i in 1:length(fileList)) {
# make a list of dataframes and an index of dates
data[i] <- data.frame(fromJSON(fileList[i]))
date[i] <- substr(fileList[i], 1, 10)
# remove useless info
data[i]$info <- NULL
data[i]$description <- NULL
data[i]$timestamp <- NULL
}
library(jsonlite)
library(dplyr)
setwd("~/Documents/TDI2019/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- list()
dates <- c()
for (i in 1:length(fileList)) {
# make a list of dataframes and an index of dates
dates[i] <- substr(fileList[i], 1, 10)
}
jsonDump <- lapply(jsonDump, unlist)
for (i in 1:length(jsonDump)) {
if (length(jsonDump[i] != jsonDump[1]) {
jsonDump[i] <- jsonDump[i-1]
}
}
for (i in 1:length(jsonDump)) {
if (length(jsonDump[i] != jsonDump[1]) {
jsonDump[i] <- jsonDump[i-1] }
}
for (i in 1:length(jsonDump)) {
if (length(jsonDump[i] != jsonDump[1])
jsonDump[i] <- jsonDump[i-1]
}
for (i in 1:length(jsonDump)) {
if (length(jsonDump[i] != jsonDump[1])) {
jsonDump[i] <- jsonDump[i-1]
}
}
for (i in 1:length(jsonDump)) {
if (length(jsonDump[i]) != length(jsonDump[1])) {
jsonDump[i] <- jsonDump[i-1]
}
}
tibble(jsonDump)
unlist(jsonDump[1])
for (i in 1:length(jsonDump)) {
if (length(jsonDump[i]) != length(jsonDump[1])) {
jsonDump[i] <- jsonDump[i-1]
}
}
for (i in 1:length(jsonDump)) {
if (length(jsonDump[i]) != length(jsonDump[1])) {
jsonDump[i] <- jsonDump[i-1]
}
}
for (i in 1:length(jsonDump)) {
if (length(unlist(jsonDump[i])) != length(unlist(jsonDump[1]))) {
jsonDump[i] <- jsonDump[i-1]
}
}
tibble(jsonDump)
jsonDump
jsonDump[1]
tibble(jsonDump[1])
mystring <- gsub(".*rates.USD","",jsonDump[1])
mystring
jsonDump[1]
mystring
jsonDump[1]
glimpse(jsonDump[1])
glimpse(jsonDump[1][1])
jsonDump[1]$info
jsonDump[1]$description
jsonDump[1][1]
mystring <- toString(jsonDump[1])
mystring
substring(mystring, 93)
substring(mystring, 92)
mystring2 <- toString(jsonDump[2]) %>% substring(92)
mystring2
mystrings1 < gsub("\", "", mystrings1)
}
{}
mystrings1
gsub("\", "", mystrings2)
gsub("\", "", mystring2)
mystring2
library(stringr)
str_replace_all(mystring2, "\", "")
mystring2 <- str_replace_all(mystring2, "\", "")
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Documents/TDI2019/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
currencies <- c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB"
"PHP","PKR","NOK","NZD","MYR","LAK","KWD","KRW","KES"
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD"
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD"
"EUR")
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Documents/TDI2019/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
currencies <- c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB","PHP","PKR","NOK","NZD","MYR","LAK","KWD","KRW","KES","ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD","KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD","EUR")
for (i in 1:length(fileList)) {
# make a list of dataframes and an index of dates
dates[i] <- substr(fileList[i], 1, 10)
}
jsonDump <- lapply(jsonDump, unlist)
# Replace NULL values with the last real values
for (i in 1:length(jsonDump)) {
if (length(unlist(jsonDump[i])) != length(unlist(jsonDump[1]))) {
jsonDump[i] <- jsonDump[i-1]
}
# Convert to str, delete headings
jsonDump[i] <- toString(jsonDump[i]) %>% substring(92)
}
glimpse(jsonDump[1])
mystring1 <- jsonDump[1]
strsplit(mystring1, ", \", fixed=TRUE)
%>% mystring1
mystring1
mystring1 <- unlist(mystring1) %>% strsplit(mystring1, ', \', '')
