install.packages("ggplot2")
install.packages("rjson")
library(rjson)
library(rjson)
filenames <- list.files("/kyat", pattern="*.json", full.names=TRUE)
glimpse(filenames)
jsonData <- lapply(filenames, function(x) fromJSON(file=x))
str(jsonData)
head(jsonData, n=10)
filenames <- list.files("~/home/s/kyat", pattern="*.json", full.names=TRUE)
jsonData <- lapply(filenames, function(x) fromJSON(file=x))
head(jsonData, n=10)
jsonData
filenames
sample <- fromJSON("~/home/s/kyat/2018.01.02.json")
sample <- fromJSON("/home/s/kyat/2018.01.02.json")
sample <- fromJSON("home/s/kyat/2018.01.02.json")
library(rjson)
files <- list.files(path = "~/home/s/kyat", pattern = "*.json", full.names = TRUE)
tbl <- sapply(files, fromJSON) %>%
bind_rows(.id = "date")
files <- list.files(path = "~/home/s/kyat", pattern = "*.json", full.names = TRUE)
tbl <- sapply(files, fromJSON) %>%
bind_rows(.id = "date")
library(jsonlite)
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset <- c(dataset, tbl_df(sliver))
}
# Transform the data into a list of 38 vectors
dataset <- do.call("rbind", dataset)
dataset <- split(dataset, rep(1:ncol(dataset), each = nrow(dataset)))
names(dataset) <- currencies
x <- c(dates)
y <- c(dataset$USD)
plotdata <- data.frame(x,y)
head(plotdata)
ggplot(plotdata, aes(x, y)) + geom_line() +
scale_x_date(format = "%b-%Y") + xlab("") + ylab("kyats per dollar")
library(ggplot2)
ggplot(plotdata, aes(x, y)) + geom_line() +
scale_x_date(format = "%b-%Y") + xlab("") + ylab("kyats per dollar")
ggplot(plotdata, aes(x, y)) + geom_line() +
xlab("") + ylab("kyats per dollar")
df <- melt(dataset ,  id.vars = 'time', variable.name = 'series')
library(reshape2)
df <- melt(dataset ,  id.vars = 'time', variable.name = 'series')
ggplot(df, aes(time,value)) + geom_line(aes(colour = series))
ggplot(df, aes(time,value)) + geom_line(aes(colour = currencies))
ggplot(dataset, aes(dates,currencies)) + geom_line(aes(colour = currencies))
fortify(dataset)
data.frame(dataset)
dataset <- data.frame(dataset)
names(dataset) <- dates
ggplot(dataset, aes(dates,currencies)) + geom_line(aes(colour = currencies))
ggplot(dataset, aes(currencies)) + geom_line(aes(colour = currencies))
ggplot(dataset, aes(dates)) + geom_line(aes(colour = currencies))
library(ggridges)
install.packages(ggridges)
install.packages("ggridges")
head(dataset)
ggplot(dataset, aes(x = dates, fill = cut)) +
geom_density_ridges() +
theme_ridges() +
theme(legend.position = "none")
ggplot(dataset, aes(x = dates, fill = cut)) +
theme_ridges() +
theme(legend.position = "none")
ggplot(dataset, aes(x = dates, y = currencies fill = currencies)) +
geom_density_ridges() +
theme_ridges() +
theme(legend.position = "none")
install.packages("streamgraph")
install.packages("ttr")
install.packages("TTR")
