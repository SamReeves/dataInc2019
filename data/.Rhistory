library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
sliver <- data.frame("rate" = unlist(sliver,
use.names=FALSE), 'currency' = currencies)
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset <- c(dataset, sliver)
}
sliver
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset <- c(dataset, data.frame("rate" = unlist(sliver,
use.names=FALSE), 'currency' = currencies))
}
sliver
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
}
sliver
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset <- c(dataset, sliver)
}
sliver
dataset
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset <- c(dataset, c(sliver)
}
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset <- c(dataset, data.frame(sliver))
}
sliver
dataset
dataset[1]
data.frame('rates' = dataset[1], 'currency' = currencies)
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset[i] <- data.frame('rate' = sliver, 'currency' = currencies))
}
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset[i] <- data.frame('rate' = sliver, 'currency' = currencies)
}
sliver
head(dataset)
glimpse(dataset)
sliver
dataset[1]
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset[i] <- sliver)
}
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset[i] <- sliver
}
sliver
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset <- c(dataset, sliver)
}
sliver
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset <- c(dataset, rbind(sliver))
}
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset <- c(dataset, tbl_df(sliver))
}
sliver
dataset
names(dataset) <- dates
head(dataset)
dataset[1][6]
dataset[1][1]
dataset[1][2]
dataset[1:36]
plot(unlist(sliver), unlist(currencies))
plot(unlist(dates), unlist(dataset))
plot(unlist(dates), unlist(dataset$USD))
plot(unlist(dates), unlist(dataset$JPY))
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset <- c(dataset, list(sliver))
}
sliver
head(dataset)
glimpse(dataset)
library(jsonlite)
library(dplyr)
library(stringr)
# declare some handy vaiables
setwd("~/Desktop/di/data")
fileList <- list.files(pattern = "*.json")
jsonDump <- lapply(fileList, fromJSON)
dates <- c()
dataset = c()
currencies <- factor(c("USD","VND","THB","SEK","LKR","ZAR","RSD","SAR","RUB",
"PHP","PKR","NOK","NZD","NPR","MYR","LAK","KWD","KRW","KES",
"ILS","IDR","INR","HKD","EGP","DKK","CZK","CNY","CAD",
"KHR","BND","BRL","BDT","AUD","JPY","CHF","GBP","SGD",
"EUR"))
# make an index of dates, convert to Date
for (i in 1:length(fileList)) {
dates[i] <- substr(fileList[i], 1, 10)
}
dates <- as.Date(dates, '%Y.%m.%d')
# Convert to dataframes...
# Remove useless headings, remove commas
for (i in 1:length(jsonDump)) {
sliver <- unlist(jsonDump[i], use.names=FALSE) %>%
tbl_df %>% slice(4:41)
sliver <- sapply(sliver, function(v) {
as.numeric(gsub("\\,","", as.character(v)))
})
# Replace NULL values with previous values
if (length(sliver) != length(currencies)) {
sliver <- dataset[i-1]
}
dataset <- c(dataset, tbl_df(sliver))
}
glimpse(dataset)
tble_df(sliver)
tbl_df(sliver)
library(tidyr)
gather(sliver[currencies])
sliver[currencies]
sliver
sliver[currencies]
